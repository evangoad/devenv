#!/usr/bin/env python

import os
import subprocess
import git 
import sys
import optparse

def main():
  # git.cmd.Git(os.path.expanduser("~/.devie")).pull()

  p = optparse.OptionParser(version='devenv 0.0.1')
  options, arguments = p.parse_args()

  if len(arguments) == 0:
    if os.uname()[0] == "Linux":
      print "devenv detected LINUX! running command:"
      command = ["ansible-playbook", os.path.expanduser("~/.devie/playbooks/ubuntu.yml"), "-i", os.path.expanduser("~/.devie/playbooks/inventory")]
      print str(command)
      subprocess.check_call(command)
    else:
      print "devenv detected OSX! running command:"
      command = ["ansible-playbook", os.path.expanduser("~/.devie/playbooks/osx.yml"), "-i", os.path.expanduser("~/.devie/playbooks/inventory")]
      print str(command)
      subprocess.check_call(command)
  else:
      p.print_help()


if __name__ == '__main__':
  main()
